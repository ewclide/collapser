"use strict";var _createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(function(){var a=function(){function c(d){_classCallCheck(this,c),this.element=$(document.createElement("a")),this.collapsed=d.collapsed||!1,this.class=d.class||"collapser-button",this.textOpened=d.textOpened||"\u0441\u043A\u0440\u044B\u0442\u044C",this.textClosed=d.textClosed||"\u043F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435",this.speed=d.speed||250,this.funct=d.funct||"linear",this.block=d.block,this.init(d)}return _createClass(c,[{key:"init",value:function(f){var g=this;this.element.attr("class",f.class),f.append?$(f.append).append(this.element):this.block.element.after(this.element),this.element.click(function(){g.toogle()})}},{key:"close",value:function(){this.block.element.animate({height:this.block.minHeight},this.speed,this.funct),this.element.html(this.textClosed),this.collapsed=!0}},{key:"open",value:function(){this.block.element.animate({height:this.block.maxHeight},this.speed,this.funct),this.element.html(this.textOpened),this.collapsed=!1}},{key:"toogle",value:function(){this.collapsed?this.open():this.close()}}]),c}(),b=function(){function c(d){_classCallCheck(this,c),this.element=d.element,this.maxHeight=!1,this.minHeight=!1,this.button=!1,this.init(d)}return _createClass(c,[{key:"init",value:function(){this.minHeight=this.element.attr("data-min-height")||100,this.maxHeight=this.element.attr("data-max-height")||500;var g={block:this,funct:this.element.attr("data-time-func"),append:this.element.attr("data-button-append"),speed:this.element.attr("data-speed"),textOpened:this.element.attr("data-open-text"),textClosed:this.element.attr("data-close-text"),collapsed:this.element.attr("data-collapsed"),class:this.element.attr("data-button-class")};this.button=new a(g),this.getSize()}},{key:"getSize",value:function(){var f=this.element.find("img");if(0!=f.length){var g=this,h=0;f.each(function(){var j=new Image;j.src=this.src,j.onload=function(){h++,h==f.length&&g.setSize()}})}else this.setSize()}},{key:"setSize",value:function(){var f=this,g=this.element.height();0==g?setTimeout(function(){f.setSize()},10):(f.maxHeight=g,f.minHeight>g&&(f.minHeight=g,f.button.element.hide()),f.element.css("height",f.minHeight),f.element.css("overflow","hidden"),f.button.toogle())}}]),c}();$.fn.collapse=function(c){this.each(function(){c?c.element=$(this):c={element:$(this)},this.collapser=new b(c)})},$(document).ready(function(){$(".collapser").collapse()})})();